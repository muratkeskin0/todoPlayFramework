# https://www.playframework.com/documentation/latest/Configuration

# ---- Database defaults (local) ----
app.db {
  host = "localhost"
  port = 5432
  name = "todo_db"
  user = "postgres"
  pass = "macig"
}

# ---- Database env overrides (Docker/prod) ----
app.db.host = ${?DB_HOST}
app.db.port = ${?DB_PORT}
app.db.name = ${?DB_NAME}
app.db.user = ${?DB_USER}
app.db.pass = ${?DB_PASS}

# ---- Slick PostgreSQL Configuration ----
slick.dbs.default.profile = "slick.jdbc.PostgresProfile$"
slick.dbs.default.db {
  driver = "org.postgresql.Driver"
  url    = "jdbc:postgresql://"${app.db.host}":"${app.db.port}"/"${app.db.name}"?currentSchema=public"
  user   = ${app.db.user}
  password = ${app.db.pass}

  # Connection pool tuning
  connectionTimeout = 30000
  maximumPoolSize   = 10
  idleTimeout       = 600000
  keepAliveConnection = true
  
  # Slick async executor configuration
  numThreads = 10
  queueSize = 1000
}

# ---- Email defaults (local/dev) ----
app.mail {
  host = "smtp.gmail.com"
  port = 587
  user = "softwareeng.murat.keskin@gmail.com"
  password = ${?MAIL_PASSWORD}  # Required - must be set via environment variable
  ssl = false
  tls = true
  from = "softwareeng.murat.keskin@gmail.com"
  fromName = "Todo App"
}

# ---- Email env overrides (Docker/prod) ----
app.mail.password = ${?MAIL_PASSWORD}
app.mail.user = ${?MAIL_USER}
app.mail.host = ${?MAIL_HOST}
app.mail.port = ${?MAIL_PORT}

# Play Mailer Configuration
play.mailer {
  host = ${app.mail.host}
  port = ${app.mail.port}
  user = ${app.mail.user}
  password = ${app.mail.password}
  ssl = false
  tls = true
  mock = false
  timeout = 30000
  connectiontimeout = 10000
}

# Custom email settings
mail {
  from = ${app.mail.from}
  fromName = ${app.mail.fromName}
}

# ---- Application Configuration ----
app {
  baseUrl = "http://localhost:9000"
}

# Allow baseUrl override in production
app.baseUrl = ${?APP_BASE_URL}

# ---- Admin Configuration ----
admin {
  email = "admin@todoapp.com"
  firstName = "Admin"
  lastName = "User"
  password = "Admin123"
}

# Enabled bindings
play.modules.enabled += "Modules"

# Custom filters
play.http.filters = "filters.Filters"