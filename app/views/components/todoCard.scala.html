@*
 * Todo Card Component
 * Single todo row in table
 *@
@import _root_.dto.TodoDTO.TodoResponse

@(todo: TodoResponse)(implicit request: RequestHeader)

<tr class="@if(todo.completed) {has-background-success-light}">
    <td>
        @if(todo.completed) {
            <span class="tag is-success">✓ Completed</span>
        } else {
            <span class="tag is-warning"> Pending</span>
        }
    </td>
    <td>
        <strong @if(todo.completed) {style="text-decoration: line-through;"}>
            @todo.title
        </strong>
    </td>
    <td>
        @todo.description.getOrElse("-")
    </td>
    <td>
        <small class="has-text-grey">
            @todo.createdAt.take(10)
        </small>
    </td>
    <td>
        <div class="buttons are-small">
            @helper.form(routes.TodoController.toggle(todo.id), Symbol("style") -> "display:inline") {
                @helper.CSRF.formField
                <button type="submit" class="button is-info is-small" title="Toggle Status">
                    @if(todo.completed) { x } else { ✓ }
                </button>
            }
            
            <a href="@routes.TodoController.edit(todo.id)" class="button is-warning is-small" title="Edit">Edit</a>
            
            @helper.form(routes.TodoController.delete(todo.id), Symbol("style") -> "display:inline", Symbol("class") -> "delete-form") {
                @helper.CSRF.formField
                <button type="submit" class="button is-danger is-small" title="Delete">Delete</button>
            }
        </div>
    </td>
</tr>

